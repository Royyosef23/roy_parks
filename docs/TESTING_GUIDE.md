# 🧪 **מדריך בדיקות למערכת חניות פאדובה 32**

## 📋 **סוגי בדיקות במערכת**

### 1. **בדיקות API (Backend)**
בדיקת הנתיבים והלוגיקה העסקית

### 2. **בדיקות יחידה (Unit Tests)**
בדיקת פונקציות בודדות

### 3. **בדיקות אינטגרציה**
בדיקת התקשורת בין רכיבים

### 4. **בדיקות ממשק משתמש (Frontend)**
בדיקת הממשק והחוויה

### 5. **בדיקות ידניות**
בדיקות שמבוצעות באופן ידני

---

## 🚀 **הרצת בדיקות אוטומטיות**

### Backend Tests:
```bash
cd backend

# הרצת כל הבדיקות
npm test

# הרצה עם מעקב אחר שינויים
npm run test:watch

# הרצה עם דו"ח כיסוי
npm run test:coverage

# הרצה ל-CI/CD
npm run test:ci
```

### Frontend Tests (לאחר הגדרה):
```bash
cd frontend-vite

# הרצת בדיקות
npm test

# הרצה עם Cypress (E2E)
npm run cypress:open
```

---

## 🔍 **בדיקות ידניות - תסריטי בדיקה**

### **תרחיש 1: זרימת אישור חנייה מוועד הבית**

#### **שלב א': בקשת אישור חנייה**
1. **התחבר כתושב (OWNER)**
   - Email: `owner@example.com`
   - Password: `Test123456`

2. **עבור ל"בקש אישור חנייה"**
   - לחץ על הכפתור במסך הראשי
   - או נווט ל: `/request-parking-claim`

3. **מלא את הטופס:**
   - **קומה**: בחר `-2` (קומת חניות שנייה)
   - **מספר חנייה**: הכנס `127`
   - **סיבת הבקשה**: "אני בעל החנייה לפי תעודת הבעלות"

4. **שלח את הבקשה**
   - וודא שהבקשה נשלחה בהצלחה
   - צפוי: הודעת אישור + מעבר לדשבורד

#### **שלב ב': אישור ועד הבית**
1. **התחבר כמנהל ועד הבית (ADMIN)**
   - Email: `admin@example.com`
   - Password: `Admin123456`

2. **עבור לניהול בקשות**
   - לחץ על "ניהול בקשות חניות"
   - או נווט ל: `/vaad-management`

3. **בדוק את הבקשה**
   - וודא שהבקשה מופיעה ברשימה
   - בדוק שכל הפרטים נכונים (קומה -2, חנייה 127)

4. **אשר את הבקשה**
   - לחץ על כפתור "אשר"
   - הוסף הערה: "מאושר לפי בדיקת תעודות בעלות"
   - צפוי: הבקשה עוברת לסטטוס "מאושר"

#### **שלב ג': הוספת חנייה להשכרה**
1. **חזור להתחברות כתושב (OWNER)**

2. **עבור ל"הוסף חנייה"**
   - צפוי: המערכת מזהה שיש אישור
   - צפוי: מוצגת חנייה מאושרת (קומה -2, חנייה 127)

3. **מלא פרטי החנייה:**
   - **תיאור**: "חנייה מקורה, גישה נוחה"
   - **סוג חנייה**: מקורה
   - **גובה מקסימלי**: 2.2 מטר
   - **נקודת טעינה**: לא
   - **נגישות**: לא
   - **הוראות גישה**: "כניסה דרך שער B, רמפה ראשונה ימינה"

4. **פרסם את החנייה**
   - צפוי: החנייה מתווספת למערכת
   - צפוי: מחיר קבוע 5 נקודות לשעה

### **תרחיש 2: חיפוש והזמנת חנייה**

#### **שלב א': חיפוש חנייה**
1. **התחבר כמחפש חנייה (RENTER)**
   - Email: `renter@example.com`
   - Password: `Test123456`

2. **עבור לחיפוש חניות**
   - לחץ על "חפש חניות"
   - או נווט ל: `/search-parking`

3. **חפש חניות זמינות**
   - **תאריך**: מחר
   - **שעת התחלה**: 09:00
   - **שעת סיום**: 17:00
   - צפוי: מוצגת החנייה בפאדובה 32

#### **שלב ב': הזמנת חנייה**
1. **לחץ על החנייה**
   - בדוק את כל הפרטים
   - וודא מחיר: 8 שעות × 5 נקודות = 40 נקודות

2. **בצע הזמנה**
   - הוסף הערה: "אגיע בערך ב-09:15"
   - לחץ "הזמן עכשיו"
   - צפוי: הזמנה מתבצעת (אם יש מספיק נקודות)

#### **שלב ג': ניהול ההזמנה**
1. **עבור ל"ההזמנות שלי"**
   - וודא שההזמנה מופיעה
   - בדוק סטטוס: "מאושר" או "ממתין"

2. **בדוק פרטי ההזמנה**
   - כתובת: פאדובה 32, תל אביב
   - מיקום: קומה -2, חנייה 127
   - זמן: התאריכים והשעות שנבחרו
   - מחיר: 40 נקודות

### **תרחיש 3: ניהול נקודות**

#### **בדיקת יתרת נקודות**
1. **עבור לדשבורד**
   - וודא שיתרת הנקודות מוצגת בבירור
   - בדוק היסטוריית עסקאות

#### **הרוויח נקודות (בעל חנייה)**
1. **התחבר כבעל חנייה**
   - בדוק שמוצגים הכנסות מהשכרות
   - וודא חישוב נכון: 40 נקודות + 15 בונוס = 55 נקודות

#### **בדיקת מחסור בנקודות**
1. **נסה להזמין חנייה ללא מספיק נקודות**
   - צפוי: הודעת שגיאה ברורה
   - צפוי: הצעה לקנות נקודות או להרוויח

---

## ✅ **רשימת בדיקות - Checklist**

### **אבטחה ואימות**
- [ ] רגיסטרציה עם סיסמה חזקה
- [ ] התחברות עם אימייל וסיסמה
- [ ] הגנה על דפים עם middleware
- [ ] הפרדת הרשאות (ADMIN, OWNER, RENTER)
- [ ] התנתקות מבטיחה ניקוי token

### **ניהול חניות**
- [ ] בקשת אישור חנייה מוועד הבית
- [ ] אישור/דחיית בקשות על ידי מנהל
- [ ] הוספת חנייה מאושרת למערכת
- [ ] עריכת פרטי חנייה
- [ ] הסרת חנייה מהמערכת

### **מערכת הזמנות**
- [ ] חיפוש חניות זמינות
- [ ] סינון לפי תאריך ושעה
- [ ] הזמנת חנייה עם נקודות
- [ ] אישור הזמנה אוטומטי
- [ ] ביטול הזמנה (בזמן)
- [ ] התחלת שימוש בחנייה
- [ ] סיום שימוש וחיוב

### **מערכת נקודות**
- [ ] יתרת נקודות מעודכנת
- [ ] חיוב נכון על הזמנות
- [ ] זיכוי נכון להשכרה
- [ ] בונוס 15 נקודות לחנייה מאושרת
- [ ] היסטוריית עסקאות
- [ ] מניעת הזמנה ללא מספיק נקודות

### **ממשק משתמש**
- [ ] דשבורד מותאם לתפקיד
- [ ] ניווט ברור בין דפים
- [ ] הודעות שגיאה ברורות
- [ ] הודעות הצלחה
- [ ] טעינות (loading) מוצגות
- [ ] תאריכונים עובדים נכון

---

## 🐛 **בדיקת שגיאות נפוצות**

### **שגיאות שרת (Backend)**
1. **בדוק התנהגות ללא חיבור למסד נתונים**
2. **בדוק התנהגות עם נתונים לא תקינים**
3. **בדוק התנהגות עם משתמש לא מחובר**
4. **בדוק התנהגות עם הרשאות לא נכונות**

### **שגיאות לקוח (Frontend)**
1. **בדוק התנהגות ללא חיבור אינטרנט**
2. **בדוק התנהגות עם שרת לא זמין**
3. **בדוק התנהגות עם נתוני טופס שגויים**
4. **בדוק התנהגות עם דפדפנים שונים**

---

## 📊 **דוח בדיקות**

### **תבנית דוח בדיקה**
```
תאריך בדיקה: ___________
גרסה: ___________
בודק: ___________

תרחישים שנבדקו:
[ ] תרחיש 1 - זרימת אישור חנייה
[ ] תרחיש 2 - הזמנת חנייה  
[ ] תרחיש 3 - ניהול נקודות

באגים שנמצאו:
1. ___________
2. ___________
3. ___________

הערות כלליות:
___________
```

---

## 🔧 **כלים לבדיקה**

### **בדיקות API**
- **Postman** - בדיקת API endpoints
- **Thunder Client** - תוסף ל-VS Code
- **curl** - פקודות command line

### **בדיקות ממשק**
- **React Developer Tools** - תוסף דפדפן
- **Redux DevTools** - לניהול state
- **Network Tab** - ברגיל פיתוח בדפדפן

### **בדיקות אוטומטיות**
- **Jest** - unit tests ו-integration tests
- **Supertest** - בדיקת API endpoints
- **React Testing Library** - בדיקת רכיבי React
- **Cypress** - end-to-end tests

---

איך אתה רוצה להתחיל עם הבדיקות? אני יכול להראות לך איך להריץ בדיקה ספציפית או להכין עוד תרחישי בדיקה.
